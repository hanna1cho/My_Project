<!DOCTYPE html>
<html lang="en">
<head>
    <title>Trading</title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

    <!-- 구글폰트 -->
    <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Viga&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">

    <style type="text/css">

        * {
            font-family: 'roboto', sans-serif;
            font-style: bold;
            color: white;
            margin: auto;
        }

        body {
            background-color: #F4D4D4;
        }

        p {
            margin: 5px;
        }

        p.details {
            margin: 5px;
            color: dimgray;
        }

        .topright {
            position: absolute;
            right: 50px;
            top: 50px;
            width: 400px;
            background-color: lightsteelblue;
            align: right;
        }

        .right {
            position: absolute;
            right: 50px;
            top: 150px;
            width: 400px;
            padding: 10px;
            background-color: lightgrey;
        }

        .left {
            font-family: 'roboto', sans-serif;
            font-style: bold;
            position: absolute;
            left: 50px;
            top: 50px;
        }

        button {
            padding: 10px;
            margin: 10px;
        }

    </style>

    <script type="text/javascript">

        window.onload = function () {
            var dataPoints = [];
            var chart = new CanvasJS.Chart("chartContainer",{
                animationEnabled: true,
                theme: "light2",
                title:{
                    text:"Price History",
                    fontSize: 22,
                },
                data: [{
                    type: "line",
                    dataPoints : dataPoints,
                }]
            });
            $.getJSON("https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=60&interval=daily", function(data) {
                $.each(data, function(key, value){
                    dataPoints.push({x: value[0][0], y: value[0][1]});
                });
                chart.render();
            });
        }

        function currentPrice() {
            $.ajax({
                type: "GET",
                url: "https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=USD&include_market_cap=false&include_24hr_vol=false&include_24hr_change=false&include_last_updated_at=false",
                data: {},
                success: function (response) {
                    let btc = response["bitcoin"];
                    let price = btc["usd"];
                    $('#update').empty().append(price);
                    console.log(price);
                   }
                })
            }

        // Script for posting orders to database
        //$ajax({
        //  type: "POST",
        //url: "/orders",
        //data: {},
        // })
    </script>
</head>

<body>

<form class="left">
    <div id="chartContainer" style="height: 500px; width: 900px;"></div>
</form>

<div>
    <form class="topright">
        <p>Available to trade</p>
        <p class="details"> USD $50,000.00</p>
        <p class="details"> BTC 0.00 </p>
    </form>

    <form class="right">
        <div class="form-group">
            <label for="exampleFormControlSelect1">Order Type</label>
            <select class="form-control" id="exampleFormControlSelect1">
                <option>BUY</option>
                <option>SELL</option>
            </select>
        </div>
        <div class="form-group">
            <label for="exampleFormControlInput1">Current Market Price (USD$)</label>
            <input type="text" id="update" class="form-control" id="exampleFormControlInput1" placeholder="$0.00" disabled>
        </div>
        <div class="form-group">
            <label for="exampleFormControlInput1">Order Quantity</label>
            <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="0 BTC">
        </div>
        <div class="form-group">
            <label for="exampleFormControlInput1">Total</label>
            <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="$0.00">
        </div>
         <button type="button" class="btn btn-primary btn-sm">Submit Order</button>
    </form>
</div>
</body>
</html>